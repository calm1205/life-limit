<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text x=%2250%%22 y=%2250%%22 style=%22dominant-baseline:central;text-anchor:middle;font-size:90px;%22>❤️‍🔥</text></svg>"
    />
    <title>lifespan</title>
  </head>
  <body>
    <p>input your birth date</p>
    <form onsubmit="return false">
      <select name="year" id="year"></select>
      <select name="month" id="month">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
      </select>
      <select name="day" id="day">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
        <option value="13">13</option>
        <option value="14">14</option>
        <option value="15">15</option>
        <option value="16">16</option>
        <option value="17">17</option>
        <option value="18">18</option>
        <option value="19">19</option>
        <option value="20">20</option>
        <option value="21">21</option>
        <option value="22">22</option>
        <option value="23">23</option>
        <option value="24">24</option>
        <option value="25">25</option>
        <option value="26">26</option>
        <option value="27">27</option>
        <option value="28">28</option>
        <option value="29">29</option>
        <option value="30">30</option>
        <option value="31">31</option>
      </select>
    </form>
    <div>
      <button id="hours-button" type="button">hours</button>
      <button id="days-button" type="button">days</button>
      <button id="weeks-button" type="button">weeks</button>
      <button id="months-button" type="button">months</button>
    </div>
  </body>
</html>

<script>
  // 現在の日付を取得
  const now = new Date()
  const currentYear = now.getFullYear()
  const currentMonth = now.getMonth() + 1
  const currentDay = now.getDate()

  // 年の選択肢を生成（現在から100年前まで）
  const yearSelect = document.getElementById("year")
  for (let year = currentYear; year >= currentYear - 100; year--) {
    const option = document.createElement("option")
    option.value = year
    option.textContent = year
    yearSelect.appendChild(option)
  }

  // 月が変更されたときに日の選択肢を更新
  const monthSelect = document.getElementById("month")
  const daySelect = document.getElementById("day")

  monthSelect.addEventListener("change", updateDays)
  yearSelect.addEventListener("change", updateDays)

  function updateDays() {
    const year = parseInt(yearSelect.value)
    const month = parseInt(monthSelect.value)
    const daysInMonth = new Date(year, month, 0).getDate()

    // 現在の選択された日を保存
    const selectedDay = parseInt(daySelect.value)

    // 日の選択肢をクリア
    daySelect.innerHTML = ""

    // 新しい日の選択肢を生成
    for (let day = 1; day <= daysInMonth; day++) {
      const option = document.createElement("option")
      option.value = day
      option.textContent = day
      if (day === selectedDay && day <= daysInMonth) {
        option.selected = true
      }
      daySelect.appendChild(option)
    }
  }

  // 初期表示時に現在の日付を選択
  yearSelect.value = currentYear
  monthSelect.value = currentMonth

  document
    .getElementById("hours-button")
    .addEventListener("click", function (e) {
      e.preventDefault()
      const year = yearSelect.value
      const month = monthSelect.value
      const day = daySelect.value

      window.location.href = `hour.html?year=${year}&month=${month}&day=${day}`
    })

  daySelect.value = currentDay

  document
    .getElementById("days-button")
    .addEventListener("click", function (e) {
      e.preventDefault()
      const year = yearSelect.value
      const month = monthSelect.value
      const day = daySelect.value

      window.location.href = `day.html?year=${year}&month=${month}&day=${day}`
    })

  document
    .getElementById("weeks-button")
    .addEventListener("click", function (e) {
      e.preventDefault()
      const year = yearSelect.value
      const month = monthSelect.value
      const day = daySelect.value
      window.location.href = `week.html?year=${year}&month=${month}&day=${day}`
    })

  document
    .getElementById("months-button")
    .addEventListener("click", function (e) {
      e.preventDefault()
      const year = yearSelect.value
      const month = monthSelect.value
      const day = daySelect.value
      window.location.href = `month.html?year=${year}&month=${month}&day=${day}`
    })
</script>

<style>
  body {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 10px;
  }
</style>
