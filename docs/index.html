<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text x=%2250%%22 y=%2250%%22 style=%22dominant-baseline:central;text-anchor:middle;font-size:90px;%22>â¤ï¸â€ğŸ”¥</text></svg>"
    />
    <title>life span</title>
  </head>
  <body>
    <h1>life span</h1>

    <!-- birth day form -->
    <form id="birthForm">
      <select name="year" id="year"></select>
      <select name="month" id="month"></select>
      <select name="day" id="day"></select>
      <button type="submit">submit</button>
    </form>
  </body>
</html>

<script>
  // ç¾åœ¨ã®æ—¥ä»˜ã‚’å–å¾—
  const now = new Date()
  const currentYear = now.getFullYear()
  const currentMonth = now.getMonth() + 1
  const currentDay = now.getDate()

  // å¹´ã®é¸æŠè‚¢ã‚’ç”Ÿæˆï¼ˆç¾åœ¨ã‹ã‚‰100å¹´å‰ã¾ã§ï¼‰
  const yearSelect = document.getElementById("year")
  for (let year = currentYear; year >= currentYear - 100; year--) {
    const option = document.createElement("option")
    option.value = year
    option.textContent = year
    yearSelect.appendChild(option)
  }

  // æœˆã®é¸æŠè‚¢ã‚’ç”Ÿæˆ
  const monthSelect = document.getElementById("month")
  for (let month = 1; month <= 12; month++) {
    const option = document.createElement("option")
    option.value = month
    option.textContent = month
    monthSelect.appendChild(option)
  }

  // æ—¥ã®é¸æŠè‚¢ã‚’ç”Ÿæˆ
  const daySelect = document.getElementById("day")
  for (let day = 1; day <= 31; day++) {
    const option = document.createElement("option")
    option.value = day
    option.textContent = day
    daySelect.appendChild(option)
  }

  // æœˆãŒå¤‰æ›´ã•ã‚ŒãŸã¨ãã«æ—¥ã®é¸æŠè‚¢ã‚’æ›´æ–°
  monthSelect.addEventListener("change", updateDays)
  yearSelect.addEventListener("change", updateDays)

  function updateDays() {
    const year = parseInt(yearSelect.value)
    const month = parseInt(monthSelect.value)
    const daysInMonth = new Date(year, month, 0).getDate()

    // ç¾åœ¨ã®é¸æŠã•ã‚ŒãŸæ—¥ã‚’ä¿å­˜
    const selectedDay = parseInt(daySelect.value)

    // æ—¥ã®é¸æŠè‚¢ã‚’ã‚¯ãƒªã‚¢
    daySelect.innerHTML = ""

    // æ–°ã—ã„æ—¥ã®é¸æŠè‚¢ã‚’ç”Ÿæˆ
    for (let day = 1; day <= daysInMonth; day++) {
      const option = document.createElement("option")
      option.value = day
      option.textContent = day
      if (day === selectedDay && day <= daysInMonth) {
        option.selected = true
      }
      daySelect.appendChild(option)
    }
  }

  // åˆæœŸè¡¨ç¤ºæ™‚ã«ç¾åœ¨ã®æ—¥ä»˜ã‚’é¸æŠ
  yearSelect.value = currentYear
  monthSelect.value = currentMonth
  daySelect.value = currentDay

  // ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡æ™‚ã®å‡¦ç†
  document.getElementById("birthForm").addEventListener("submit", function (e) {
    e.preventDefault()
    const year = yearSelect.value
    const month = monthSelect.value
    const day = daySelect.value

    // ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®šã—ã¦é·ç§»
    window.location.href = `month.html?year=${year}&month=${month}&day=${day}`
  })
</script>
